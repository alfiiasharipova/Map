package ru.netology;

import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

import java.util.Set;

import static org.junit.jupiter.api.Assertions.*;

class FileOpenTest {
    FileOpen map = new FileOpen();

    @BeforeEach
    void setUp() {
        map.addAppExtensions("PowerPoint", Set.of(".jpg"));
        map.addAppExtensions("PagePoint", Set.of(".jpg", ".png"));
        map.addAppExtensions("PagePoint2", Set.of(".jpg", ".png"));
    }

    @Test
    void addAppExtension() {
        map.addAppExtension("PagePoint2", ".GIF");
        assertTrue(map.getFileOpen().get("PagePoint2").contains(".gif"));
    }

    @Test
    void getAppByExtention() {
        assertEquals(map.getAppByExtension(".png"), Set.of("PagePoint", "PagePoint2"));
    }

    @Test
    void deleteTie() {
        map.deleteTie("PagePoint", ".jpg");
        assertFalse(map.getFileOpen().get("PagePoint").contains(".jpg"));
    }

    @Test
    void deleteTieIfOneItem() {
        map.deleteTie("PowerPoint", ".jpg");
        assertNull(map.getFileOpen().get("PowerPoint"));
    }

    @Test
    void getApps() {
        assertEquals(map.getApps(), Set.of("PagePoint2", "PagePoint", "PowerPoint"));
    }

    @Test
    void getExtensions() {
        assertEquals(map.getExtensions(), Set.of(".jpg", ".png"));
    }
}